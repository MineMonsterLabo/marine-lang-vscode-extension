{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "marinescript",
	"patterns": [
		{
			"include": "#line_comment"
		},
		{
			"include": "#range_comment"
		},
		{
			"include": "#program"
		}
	],
	"repository": {
		"line_comment": {
			"name": "comment.marinescript",
			"match": "//.*"
		},
		"range_comment": {
			"name": "comment.marinescript",
			"begin": "/\\*",
			"end": "\\*/"
		},
		"program": {
			"name": "entity.other.program.marinescript",
			"patterns": [
				{
					"include": "#func_definition"
				}
			]
		},
		"func_definition": {
			"name": "entity.other.funcdefinition.marinescript",
			"begin": "\\b(fun)\\s+([a-z]([a-z_]|[0-9])+)",
			"beginCaptures": {
				"1": {
					"name": "keyword.other.func.marinescript"
				},
				"2": {
					"patterns": [
						{
							"include": "#func_name"
						}
					]
				}
			},
			"end": "\\b(end)\\b",
			"endCaptures": {
				"1": {
					"name": "keyword.other.func.marinescript"
				}
			},
			"patterns": [
				{
					"include": "#func_body"
				}
			]
		},
		"func_body": {
			"patterns": [
				{
					"include": "#statement"
				}
			]
		},
		"statement": {
			"patterns": [
				{
					"include": "#break_statement"
				},
				{
					"include": "#yield_statement"
				},
				{
					"include": "#while_statement"
				},
				{
					"include": "#for_statement"
				},
				{
					"include": "#foreach_statement"
				},
				{
					"include": "#ret_statement"
				},
				{
					"include": "#assignment"
				},
				{
					"include": "#expr"
				}
			]
		},
		"break_statement": {
			"name": "keyword.control.break.marinescript",
			"match": "break"
		},
		"yield_statement": {
			"name": "keyword.control.yield.marinescript",
			"match": "yield"
		},
		"while_statement": {
			"begin": "(while)",
			"beginCaptures": {
				"1": {
					"name": "keyword.control.while.marinescript"
				}
			},
			"end": "\\}",
			"patterns": [
				{
					"begin": "\\s+(?",
					"end": ")?\\s+",
					"patterns": [
						{
							"include": "#expr"
						}
					]
				},
				{
					"include": "#block"
				}
			]
		},
		"for_statememnt": {
			"begin": "(for)",
			"beginCaptures": {
				"1": {
					"name": "keyword.control.for.marinescript"
				}
			},
			"end": "\\}",
			"patterns": [
				{
					"begin": "\\s+(?",
					"end": ")?\\s+",
					"patterns": [
						{
							"include": "#expr"
						}
					]
				},
				{
					"include": "#block"
				}
			]
		},
		"foreach_statememnt": {
			"begin": "(foreach)",
			"beginCaptures": {
				"1": {
					"name": "keyword.control.foreach.marinescript"
				}
			},
			"end": "\\}",
			"patterns": [
				{
					"begin": "\\s+(?",
					"end": ")?\\s+",
					"patterns": [
						{
							"include": "#expr"
						}
					]
				},
				{
					"include": "#block"
				}
			]
		},
		"ret_statement": {
			"match": "(ret)\\s",
			"captures": {
				"1": {
					"name": "keyword.control.ret.marinescript"
				}
			}
		},
		"assignment": {
			"match": "(let)\\s",
			"captures": {
				"1": {
					"name": "keyword.control.let.marinescript"
				}
			}
		},
		"field_assignment": {},
		"static_field_assignment": {},
		"re_assignment_variable": {},
		"re_assignment_indexer": {},
		"block": {
			"begin": "\\{",
			"end": "\\}",
			"patterns": [
				{
					"include": "#statement"
				}
			]
		},
		"expr": {
			"patterns": [
				{
					"include": "#if_expr"
				}
			]
		},
		"if_expr": {
			"begin": "(if)",
			"beginCaptures": {
				"1": {
					"name": "keyword.control.if.marinescript"
				}
			},
			"end": "\\}",
			"patterns": [
				{
					"begin": "\\s(?",
					"end": ")?\\s+",
					"patterns": [
						{
							"include": "#expr"
						}
					]
				},
				{
					"begin": "\\{",
					"end": "\\}",
					"patterns": [
						{
							"include": "#statement"
						}
					]
				}
			]
		},
		"binary_op_expr": {},
		"unary_op_expr": {},
		"dot_op_expr": {},
		"macro": {
			"name": "entity.other.macro.marinescript"
		},
		"func_name": {
			"name": "entity.name.function",
			"match": "[a-z]([a-z_]|[0-9])+"
		},
		"unary_op": {
			"name": "keyword.operator.unary.marinescript",
			"match": "\\-|\\!"
		}
	},
	"scopeName": "source.mrn"
}