{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "marinescript",
	"patterns": [
		{"include": "#func_decl"},
		{"include": "#keywords"},
		{"include": "#func_call"},
		{"include": "#constants"},
		{"include": "#identifier"}
	],
	"repository": {
		"func_decl":{
			"patterns": [{
				"match": "(fun)\\s+([a-z_][a-z0-9_]*)\\((.*)\\)",
				"captures": {
					"1": {"patterns": [{"include":"#keywords"}]},
					"2": {"patterns": [{"include":"#func_name"}]},
					"3": {"patterns": [{"include":"#func_param"}]}
				}
			}]
		},
		"func_param":{
			"patterns": [{
				"name": "variable.parameter.marinescript",
				"match": "[a-z_][a-z0-9_]*"
			}]
		},
		"identifier":{
			"patterns": [{
				"name": "variable.other.marinescript",
				"match": "[a-z_][a-z0-9_]*"
			}]
		},
		"func_call":{
			"patterns": [
				{
					"match": "([a-z_][a-z0-9_]*)\\(\\)",
					"captures": {
						"1": {"patterns": [{"include":"#func_name"}]}
					}
				},
				{
					"match": "([a-z_][a-z0-9_]*)\\((.+)\\)",
					"captures": {
						"1": {"patterns": [{"include":"#func_name"}]},
						"2": {"patterns": [{"include":"#func_param"}]}
					}
				}
			]
		},
		"func_name":{
			"patterns": [{
				"name":"entity.name.function.marinescript",
				"match":"[a-z_][a-z0-9_]*"
			}]
		},
		"constants":{
			"patterns": [{
				"name":"constant.numeric.marinescript",
				"match":"[0-9]+"
			}]
		},
		"keywords":{
			"patterns": [
				{"include": "#fun_keyword"},
				{"include": "#end_keyword"},
				{"include": "#in_keyword"},
				{"include": "#let_keyword"},
				{"include": "#foreach_keyword"},
				{"include": "#for_keyword"},
				{"include": "#if_keyword"},
				{"include": "#else_keyword"},
				{"include": "#ret_keyword"},
				{"include": "#await_keyword"}
			],
			"repository":{
				"fun_keyword": {
					"patterns": [{
						"name": "keyword.other.marinescript",
						"match": "fun"
					}]
				},
				"end_keyword": {
					"patterns": [{
						"name": "keyword.other.marinescript",
						"match": "end"
					}]
				},
				"in_keyword": {
					"patterns": [{
						"name": "keyword.other.marinescript",
						"match": "in"
					}]
				},
				"let_keyword": {
					"patterns": [{
						"name": "keyword.control.marinescript",
						"match": "let"
					}]
				},
				"foreach_keyword": {
					"patterns": [{
						"name": "keyword.control.marinescript",
						"match": "foreach"
					}]
				},
				"for_keyword": {
					"patterns": [{
						"name": "keyword.control.marinescript",
						"match": "for"
					}]
				},
				"if_keyword": {
					"patterns": [{
						"name": "keyword.control.marinescript",
						"match": "if"
					}]
				},
				"else_keyword": {
					"patterns": [{
						"name": "keyword.control.marinescript",
						"match": "else"
					}]
				},
				"ret_keyword": {
					"patterns": [{
						"name": "keyword.control.marinescript",
						"match": "ret"
					}]
				},
				"await_keyword": {
					"patterns": [{
						"name": "keyword.control.marinescript",
						"match": "await"
					}]
				}
			}
		}
	},
	"scopeName": "source.mrn"
}